---
marp: true
header: "～DDDとEFCoreから考える値オブジェクトのすゝめ～"
theme: default
paginate: true
style: |
  section {
    background-color: #f1f0eb;
  }
  .columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    align-items: start;
  }
  .center {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;   
  }
  .small {
    font-size: 16px;
  } 
  .midium {
    font-size: 20px;
  } 
  .large {
    font-size: 26px;
  } 
---

# ドメインモデルをいつやるか

- 値オブジェクトやドメインモデルについての率直な感想
    - ファイルが増えて追いずらそう、めんどい、やったことない、学習コスト・・・
- **どこでも使えばいいってものではない**
- 機能ごとに変えてもよい

---
## ドメインモデルをいつやるか
- 戦略的DDDによれば、優秀なエンジニアは、ドメインモデルを利用して中核的業務領域の本質的な複雑さに向き合うものである
    - 皆さんは十分すぎるほど優秀で、そして事業価値をもたらすべき存在です。

1. 今は中核的業務領域と呼べるほど複雑でなくても、必要な時はいつやってくるかわからない
    - サブスクリプションビジネスにおいては、スピーディーで機能改善を**継続的に**行うことが必須
    - 今はシンプルでも、その製品が成功すればするほどに、いつかは複雑になっていく
- 我々のアプリケーションは、少しずつ汚れてきていないか？
    - 汚れたコードはこれまで価値を提供してきた証拠でもある、恥じることはない…
        - 嫌な（しかし役に立つ）経験則→泥団子のコードは中核的な業務領域である
2. 拡大期にあるわが社、エンジニアの流動化は必至
（FE→BE転向や採用による新規アサイン、育休産休・介護休）
    - あなたの頭の中にある業務知識は、いつかは引き継がなければならない
    - あなたはいつか、見ず知らずのコードに飛び込む必要がある

→だから業務のモデル化やそれによるコードの自己文書化が必要

---

- つまり、いつかは複雑さに**真正面から**取り組むべき時が来る
    - 業務ロジックが凝集され、カオスにならないコードベース
        - 美しいまな板のようなもの
    - 業務エキスパートと深く相互理解された洗練されたユビキタス言語・それらが生み出す役に立つ（業務ロジックを雄弁に語ることができる）モデル
        - 切れ味のいい包丁のようなもの
    - これらが整うことで、いつでも新しく魅力的な機能（料理）を産み出すことができる
- ただEFCoreを使うだけだと、汚れたまな板とさびた包丁で料理するようなことになっていく
    - どんなに料理人（エンジニア）の腕が良くても、スピード（生産性）が落ち、出来上がる料理（機能）の品質は低下する

---

# まとめ

- 自己文書化された雄弁なコードにより
    - 将来の辛く苦しい仕事を回避すべき
    - スピーディーな開発生産性を維持できる
- ドメインモデルの実践により、POCOで業務ロジックを記述することに集中できる
    - CRUDではなく、ビジネスそのものの複雑さに
- EFCoreを利用しているのは、複雑なリレーションをオブジェクトとして表現し、さらにオブジェクトを値オブジェクトとして業務ロジックを表現するため
- 我々が実装すべきなのは、本質的に複雑な中核的領域であり、DDDが効く範囲
    - どこでもやるというわけではない
- まずは、値オブジェクトを使っていこう